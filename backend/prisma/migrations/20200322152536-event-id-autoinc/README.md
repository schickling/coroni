# Migration `20200322152536-event-id-autoinc`

This migration has been generated by Emanuel Joebstl at 3/22/2020, 3:25:36 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "EventType_new" AS ENUM ('HighRiskArea');
ALTER TABLE "public"."Event" ALTER COLUMN "eventType" DROP DEFAULT,
                        ALTER COLUMN "eventType" TYPE "EventType_new" USING ("eventType"::text::"EventType_new"),
                        ALTER COLUMN "eventType" SET DEFAULT 'HighRiskArea';
ALTER TYPE "EventType" RENAME TO "EventType_old";
ALTER TYPE "EventType_new" RENAME TO "EventType";
DROP TYPE "EventType_old"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200321114717-fix-id-naming..20200322152536-event-id-autoinc
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 generator client {
   provider = "prisma-client-js"
@@ -21,9 +21,9 @@
   interactions Event[] @relation("UserInteractions")
 }
 model Event {
-  id         Int       @id
+  id          Int       @id @default(autoincrement())
   user        User      @relation("UserEvents")
   timestamp   DateTime
   eventType   EventType
   interaction User?     @relation("UserInteractions")
@@ -34,15 +34,10 @@
 enum EventType {
   // Having travelled in a high risk area before
   HighRiskArea
-  // Moving to another part of Germany.
-  Location
-  // Social interaction with another user
-  Interaction
-  // Developed Sympthoms
-  Sympthoms
-  // Diagnosed Sick
-  DiagnosedSick
-  // Marker inserted in past timeline when covid is diagnosed, to ease model calculation.
-  MarkerSick 
+  // Moving to another part of Germany. Location
+  // Social interaction with another user Interaction
+  // Developed Sympthoms Sympthoms
+  // Diagnosed Sick DiagnosedSick
+  // Marker inserted in past timeline when covid is diagnosed, to ease model calculation. MarkerSick
 }
```


